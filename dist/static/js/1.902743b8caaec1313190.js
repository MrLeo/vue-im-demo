webpackJsonp([1,3],{19:function(e,t,a){e.exports={"default":a(20),__esModule:!0}},20:function(e,t,a){var n=a(1),r=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},56:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(32),i=r(o),s=a(19),l=r(s),c=a(5),d=r(c),p=a(6),m=a(4),A=n(m);t["default"]={name:"map",data:function(){return{map:null,markers:[],markderLevel:1}},computed:(0,d["default"])({},(0,p.mapState)({indexSearch:function(e){return e.base.indexSearch}}),(0,p.mapGetters)({baseInfo:"baseInfo"})),watch:{indexSearch:{deep:!0,handler:function(e,t){var a=this;console.log("[Leo]indexSearch has be change => ",(0,l["default"])(e)),e.empty||a.setSecondLevelMarker().then(function(e){})}}},methods:(0,d["default"])({},(0,p.mapActions)(["setRoadList","setMapList"]),{init:function(){var e=this;e.map=new AMap.Map("map",{center:[116.398075,39.908149],zoom:8}),e.map.plugin(["AMap.ToolBar"],function(){e.map.addControl(new AMap.ToolBar)});var t=e.setRoadList();t.then(function(t){e.setFirstLevelMarker()}),e.$store.state.base.tempVm.$on("resetSearchInfo",function(){console.log("[Leo]resetSearchInfo => "),e.setFirstLevelMarker(),e.map.setFitView(e.markers)});var a=function(t){if(console.log("[Leo]缩放级别 => ",e.map.getZoom()),e.map.getZoom()>=13){console.log("[Leo]缩放级别大于13 => 中心点坐标 => ",(0,l["default"])(e.map.getCenter()));var a=e.map.getCenter();e.$store.commit(A.SET_INDEX_SEARCH_INFO,{dqzuobiao:[a.lat,a.lng].join(",")}),e.setSecondLevelMarker().then(function(e){})}};AMap.event.addListener(e.map,"zoomend",a)},createMarker:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"map-marker",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this,r=document.createElement("div");r.className=t,r.innerHTML=e.info||"<img src='http://webapi.amap.com/theme/v1.3/markers/n/mark_r.png'>";var o=new AMap.Marker({content:r,position:e.position||[116.398075,39.908149]});return o.subMarkers=[],o.data={},a||o.setMap(n.map),o},setFirstLevelMarker:function(){var e=this;e.markers&&e.map.remove(e.markers)||e.map.clearMap(),e.markers=[],e.$store.state.base.roadList.filter(function(t){if(t.zuobiao&&t.zuobiao.length>1){var a=e.createMarker({position:t.zuobiao.split(","),info:"<p>"+t.t_name+"</p><p>"+t.count+"</p>"},"map-marker");a.data.id=t.id,a.data.dqzuobiao=t.zuobiao,e.markers.push(a),AMap.event.addListener(a,"click",function(t){e.$store.commit(A.SET_INDEX_SEARCH_INFO,{quyu:t.target.data.id}),e.setSecondLevelMarker().then(function(t){e.map.setFitView(e.markers)})})}})},setSecondLevelMarker:function(){var e=this;return e.markers&&e.map.remove(e.markers)||e.map.clearMap(),e.markers=[],e.setMapList().then(function(t){var a=!0,n=!1,r=void 0;try{for(var o,s=(0,i["default"])(t);!(a=(o=s.next()).done);a=!0){var l=o.value;if(l.zuobiao&&l.zuobiao.length>1){var c=e.createMarker({position:l.zuobiao.split(","),info:"<p>"+l.p_name+"</p><p>"+l.jiage+"</p>"},"map-marker__2");c.data.id=l.id,c.data.zuobian=l.zuobiao,c.data.tel=l.tel,c.data.jiage=l.jiage,c.data.name=l.p_name,e.markers.push(c),AMap.event.addListener(c,"click",e.clicksecondLevelMarker)}}}catch(d){n=!0,r=d}finally{try{!a&&s["return"]&&s["return"]()}finally{if(n)throw r}}return t})},clicksecondLevelMarker:function(e){var t=e.target.data;console.log("[Leo]点击二级覆盖物 => 进入详情页 => ",t),window.localStorage.setItem("detailTitle",t.name),window.localStorage.setItem("detailTel",t.tel),window.localStorage.setItem("detailXY",t.zuobian),window.location.href="detail_product.html?id="+t.id}}),created:function(){},mounted:function(){var e=this;e.$nextTick(function(){e.init()})}}},110:function(e,t,a){t=e.exports=a(30)(),t.push([e.id,"#map{width:100%;height:100%}.map-marker,.map-marker__2{width:50px;height:50px;border:1px solid #fff;background-color:red;text-align:center;color:#fff;font-family:Microsoft YaHei UI,\\\\5FAE\\8F6F\\96C5\\9ED1,Verdana,sans-serif;overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column}.map-marker{border-radius:50%}.map-marker__2{border-radius:10px;width:auto;white-space:nowrap;line-height:20px;height:40px;padding:0 5px}.amap-marker{transform:rotate(0deg) translate(-50%,-50%)!important}","",{version:3,sources:["/./src/views/map.vue"],names:[],mappings:"AACA,KACI,WAAY,AACZ,WAAa,CAChB,AACD,2BAEI,WAAY,AACZ,YAAa,AACb,sBAAuB,AACvB,qBAAsB,AACtB,kBAAmB,AACnB,WAAY,AACZ,wEAA+D,AAC/D,gBAAiB,AACjB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AAClB,uBAAwB,AAC5B,sBAAuB,AACnB,mBAAoB,AACxB,0BAA2B,AACvB,qBAAuB,CAC9B,AACD,YACI,iBAAmB,CACtB,AACD,eACI,mBAAoB,AACpB,WAAY,AACZ,mBAAoB,AACpB,iBAAkB,AAClB,YAAa,AACb,aAAe,CAClB,AACD,aACI,qDAAyD,CAC5D",file:"map.vue",sourcesContent:['\n#map {\n    width: 100%;\n    height: 100%;\n}\n.map-marker,\n.map-marker__2 {\n    width: 50px;\n    height: 50px;\n    border: 1px solid #fff;\n    background-color: red;\n    text-align: center;\n    color: #fff;\n    font-family: "Microsoft YaHei UI", "微软雅黑", Verdana, sans-serif;\n    overflow: hidden;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: center;\n        justify-content: center;\n    -ms-flex-align: center;\n        align-items: center;\n    -ms-flex-direction: column;\n        flex-direction: column;\n}\n.map-marker {\n    border-radius: 50%;\n}\n.map-marker__2 {\n    border-radius: 10px;\n    width: auto;\n    white-space: nowrap;\n    line-height: 20px;\n    height: 40px;\n    padding: 0 5px;\n}\n.amap-marker {\n    transform: rotate(0deg) translate(-50%, -50%) !important;\n}\n'],sourceRoot:"webpack://"}])},114:function(e,t,a){var n=a(110);"string"==typeof n&&(n=[[e.id,n,""]]);a(31)(n,{});n.locals&&(e.exports=n.locals)},132:function(e,t,a){var n,r;a(114),n=a(56);var o=a(134);r=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(r=n=n["default"]),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,e.exports=n},134:function(module,exports){module.exports={render:function(){with(this)return _m(0)},staticRenderFns:[function(){with(this)return _h("div",{attrs:{id:"map"}})}]}}});
//# sourceMappingURL=1.902743b8caaec1313190.js.map